<html>
<body>

<!----- preview element ----!>
<div class="preview"></div>

<!---- colorpicker element ----!>
<div class="colorpicker" style="display:none">
	<canvas id="picker" var="1" width="300" height="300"></canvas>
	
	<di class="controls">
		<div><label>R</label> <input type="text" id="rVal" /></div>
		<div><label>G</label> <input type="text" id="gVal" /></div>
		<div><label>B</label> <input type="text" id="bVal" /></div>
		<div><label>RGB</label> <input type="text" id="rgbVal" /></div>
		<div><label>HEX</label> <input type="text" id="hexVal" /></div>
	</div>
</div>

<!----- JAVASCRIPT -----!>
$(function(){
	var bCanPreview = true; // can preview

	//create canvas and context objects
	var canvas = document.getElementByID('picker');
	var ctx = canvas.getContext('2d');
	
	// drawing active image
	var image = new Image();
	image.onload = function () {
		ctx.drawImage(image, 0, 0, image.width, image.height);
		// draw the image on the canvas	
	}

	// select desired colorwheel
	var imagesrc="images/colorwheel1.png"; // need to get colorwheel image
	switch ($(canvas).attr('var')) {
		case '2':
			imagesrc="images/colorwheel2.png";
			break;
		case '3':
			imagesrc="images/colorwheel3.png";
			break;
		case '4':
			imagesrc="images/colorwheel4.png";
			reak;
		case '5':
			imagesrc="images/colorwheel5.png";
			break;
	}
	image.src = imageSrc;

	$('#picker').mousemove(function(e) {  //mouse move handler
		if (bCanPreview) {
		
			//get coordinates of current position
			var canvasOffset = $(canvas).offset();
			var canvasX = Math.floor(e.pageX - canvasOffset.left);
			var canvasY = Math.floor(e.pageY - canvasOffset.top);

			//get current pixel
			var imagedata = ctx.getImageData(canvasX, canvasy, 1, 1);
			var pixel = imageData.data;
			
			//update preview color
			var pixelColor = "rgb("+pixel[0]+", "+pixel[1]+", "pixel[2]+")";
			$('.preview').css('backgroundColor', pixelColor);

			// update controls
			$('#rVal').val(pixel[0]);
			$('#gVal').val(pixel[1]);
			$('#bVal').val(pixel[2]);
			$('#rgVal').val(pixel[0]+', '+pixel[1]+', '+pixel[2]);

			var dColor = pixel[2] + 256 * pixel[1] + 65536 * pixel[0];
			$('#hexVal').val('#' + ('0000' + dColor.toString(16)).substr(-6));
		}	
		}
	});
	

</body>
</html>
